#include "MHeder.h"

#pragma once
namespace Camera
{
	class MCamera
	{
		const float pi2 = 6.28318530718f;
		///////////////////////////////////////////////////////////////////////////////////
		float fFov, fNear, fFar, fAspectRatio;
		uint32_t width, height;
		const float fOffset, fRotateAngle, fTimeToRotate;//fTimeToRotate 2pi per ms
		///////////////////////////////////////////////////////////////////////////////////
		float fTargetAngle;
		float fCurrentAngle;
		///////////////////////////////////////////////////////////////////////////////////
		glm::mat4 mView;
		glm::mat4 mProj;
		glm::mat4 mProjView;
		///////////////////////////////////////////////////////////////////////////////////
		void InitViewMatrix(void);
		void BuildViewMatrix(void);
	public:
		MCamera(float fov, float fnear, float ffar, uint32_t width, uint32_t height, float offset, float fRotateAngle, float fTimeToRotate);
		~MCamera();
		///////////////////////////////////////////////////////////////////////////////////
		void ReCreateProjMatrix(float fov, float fnear, float ffar, uint32_t width, uint32_t height);
		///////////////////////////////////////////////////////////////////////////////////
		void Resize(uint32_t width, uint32_t height);
		///////////////////////////////////////////////////////////////////////////////////
		glm::vec3 GetCameraPosition(void);
		glm::mat4 GetViewMatrix(void);
		glm::mat4 GetProjMatrix(void);
		glm::mat4 GetProjViewMatrix(void);
		///////////////////////////////////////////////////////////////////////////////////
		glm::mat4 GetRotateMatrix(void);
		///////////////////////////////////////////////////////////////////////////////////
		void SetRandomNoise(glm::mat4 mTransform);
		///////////////////////////////////////////////////////////////////////////////////
		void Update(float fDeltaTime_ms, float fGlobalTime_ms);
		///////////////////////////////////////////////////////////////////////////////////
		void UpdateOnly(float fDeltaTime_ms, float fGlobalTime_ms);
		///////////////////////////////////////////////////////////////////////////////////
		void RotateLeft(void);
		void RotateRight(void);
		///////////////////////////////////////////////////////////////////////////////////
	};
}

